<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FN4004 Design Process 1 - Learning Outcomes Assessment Tool</title>
    
    <style>
        /* Base styles */
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: white;
            padding: 0;
            margin: 0;
            color: #333;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .content-wrapper { width: 100%; max-width: 1600px; margin: 0 auto; padding: 0; }
        .content { background-color: white; padding: 30px; margin-bottom: 0; }
        .header { text-align: center; margin-bottom: 30px; border-bottom: 3px solid #aaaaaa; padding-bottom: 20px; }
        .logo { max-height: 300px; margin-bottom: 15px; width: auto; }
        h1 { font-size: 24px; margin-bottom: 16px; }
        h2 { font-size: 20px; margin-top: 20px; margin-bottom: 12px; }
        h3 { font-size: 16px; margin-top: 16px; margin-bottom: 8px; }
        .footer { text-align: center; margin-top: 30px; padding: 20px; color: #666; font-size: 0.9rem; border-top: 1px solid #eee; }
        
        /* Button styles */
        .btn, .grade-btn { display: inline-block; padding: 8px 16px; border-radius: 2px; font-weight: 500; cursor: pointer; margin: 4px; transition: all 0.2s; border: none; font-size: clamp(0.8rem, 1vw, 1rem); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .btn:hover, .grade-btn:hover { opacity: 0.9; }
        .grade-btn { color: #333; min-width: 70px; }
        .grade-btn.active { outline: 2px solid #666; outline-offset: 2px; }
        .outcome-btn { background-color: #f1f1f1; color: #333; }
        .outcome-btn.active { background-color: #3b82f6; color: white; }
        .percentage-btn { background-color: white; border: 1px solid #ccc; color: #333; padding: 5px 10px; border-radius: 2px; font-size: 0.8rem; margin: 3px; }
        .percentage-btn.active { background-color: #FFF200; border-color: #333; font-weight: bold; }
        .ku-button { display: inline-block; background-color: #FFF200; color: #000; font-weight: bold; font-size: clamp(0.8rem, 1vw, 1rem); padding: 12px 15px; height: 45px; box-sizing: border-box; border-radius: 2px; text-decoration: none; margin: 15px 5px; border: none; cursor: pointer; text-align: center; width: auto; transition: background-color 0.2s; line-height: 1.4; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .ku-button:hover { background-color: #E6D900; }
        
        /* Content sections */
        .grade-section { padding: 16px; border-radius: 2px; margin-bottom: 24px; color: black; }
        .input-section, .detailed-feedback-section { background-color: #f9fafb; padding: 24px; border-radius: 2px; border: 1px solid #e5e7eb; margin-bottom: 24px; }
        .outcome-content { background-color: #f9fafb; padding: 24px; border-radius: 2px; border: 1px solid #e5e7eb; margin-bottom: 24px; }
        .feedback-card { background-color: white; padding: 16px; border-radius: 2px; border: 1px solid #e5e7eb; margin-bottom: 16px; }
        .advice-section { background-color: #f9fafb; padding: 24px; border-radius: 2px; border: 1px solid #e5e7eb; margin-bottom: 24px; }
        .note { font-size: 14px; color: #666; padding: 12px; background-color: #f1f1f1; border-left: 4px solid #FFF200; margin-top: 24px; border-radius: 2px; }
        
        /* Grade colors */
        .first-plus { background-color: #80FF80; } .first { background-color: #BFFF80; } .upper-second { background-color: #FFFF80; } .lower-second { background-color: #FFE880; } .third { background-color: #FFCC80; } .marginal-fail { background-color: #FF9980; } .fail { background-color: #FF8080; }
        
        .section-title { font-weight: 700; color: #000; }
        .framework-field { color: #3b82f6; font-weight: 500; font-size: 0.75rem; margin-bottom: 12px; }
        ul.advice-list { list-style-type: disc; padding-left: 24px; margin: 0; }
        ul.advice-list li { margin-bottom: 8px; }
        .buttons-container { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-bottom: 16px; }
        .percentage-container { display: flex; flex-wrap: wrap; gap: 3px; margin-bottom: 16px; }
        .action-buttons { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; max-width: 1000px; margin: 40px auto 30px auto; padding: 0 15px; box-sizing: border-box; }
        .full-width-button { grid-column: 1 / -1; }
        
        @media screen and (max-width: 768px) {
            .logo { max-width: 90%; height: auto; } .content { padding: 15px; } .ku-button { width: 100%; margin: 10px 0; }
            .action-buttons { grid-template-columns: 1fr; max-width: 90%; padding: 0; margin-top: 30px; }
            .full-width-button { grid-column: span 1; } .grid-container { grid-template-columns: 1fr; } .detailed-feedback-grid { grid-template-columns: 1fr; }
        }
        
        .outcome-content { display: none; } .outcome-content.active { display: block; }
        #performance-chart-container { position: relative; margin: 0 auto; max-width: 400px; width: 100%; aspect-ratio: 1 / 1; }
        #performance-chart { display: block; width: 100% !important; height: 100% !important; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.5); }
        .modal-content { background-color: white; margin: 5% auto; padding: 20px; border-radius: 2px; max-width: 90%; max-height: 85vh; overflow-y: auto; }
        .close-modal { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; } .close-modal:hover { color: black; }
        .matrix-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .matrix-table th, .matrix-table td { padding: 12px; border: 1px solid #ddd; text-align: left; vertical-align: top; }
        .matrix-table th:first-child { background-color: #f1f1f1; font-weight: bold; width: 20%; text-align: left !important; min-width: 150px; }
        .matrix-table tr:first-child th { text-align: center; padding: 8px; color: black; font-weight: bold; min-width: 100px; }
        .success-message { display: none; position: fixed; top: 20px; right: 20px; background-color: #e6ffed; border-left: 4px solid #52c41a; padding: 10px 15px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15); z-index: 1000; border-radius: 2px; }
        .compare-table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 0.85rem; }
        .compare-table th, .compare-table td { padding: 6px; border: 1px solid #ddd; text-align: center; }
        .compare-table th { background-color: #f1f1f1; white-space: nowrap; } .compare-table td:first-child { white-space: nowrap; }
        .improvement-positive { color: #52c41a; font-weight: bold; } .improvement-negative { color: #f5222d; font-weight: bold; } .improvement-neutral { color: #666; }
        .grid-container { display: grid; grid-template-columns: 1fr; gap: 24px; } @media (min-width: 1024px) { .grid-container { grid-template-columns: minmax(0, 1fr) minmax(0, 1fr); } }
        .detailed-feedback-grid { display: grid; grid-template-columns: 1fr; gap: 16px; } @media (min-width: 768px) { .detailed-feedback-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); } }
    </style>
</head>
<body>
    <div class="content-wrapper">
        <div class="content">
            <div class="header">
                <img src="Talk_Performance_Mapping_FN4004.png" alt="FN4004 Performance Mapping Tool" class="logo">
                <p style="font-size: clamp(13px, 1.5vw, 14px); margin: 25px auto 0; max-width: 800px; text-align: center; padding: 0 15px;">
                    This interactive tool helps you understand how your performance varies across different learning outcomes.
                    Select your current level for each learning outcome to see targeted feedback and visualize your overall profile.
                </p>
            </div>
            
            <div id="feedback-app">
                <div class="grid-container">
                    <div class="input-section">
                        <h2 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem;">Your Performance Level by Outcome</h2>
                        <div id="outcomes-container"><!-- Learning outcomes generated here --></div>
                    </div>
                    
                    <div class="results-section">
                        <div class="bg-white p-4 rounded-md shadow-md mb-6" style="background-color: white; padding: 16px; border-radius: 2px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 24px;">
                            <h2 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem; text-align: center;">Your Performance Profile</h2>
                            <div id="performance-chart-container"><canvas id="performance-chart"></canvas></div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-md shadow-md mb-6" style="background-color: white; padding: 16px; border-radius: 2px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 24px;">
                            <h2 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 0.5rem; text-align: center;">Indicative Average Grade</h2>
                            <p style="font-size: 0.875rem; color: #6b7280; margin-bottom: 12px; text-align: center;">Note: This is for reference only and not an official grade calculation.</p>
                            <div id="average-grade-display" style="display: flex; align-items: center; justify-content: center; gap: 16px; padding: 16px; border-radius: 2px; background-color: #BFFF80;">
                                <div class="text-center"><div id="letter-grade" style="font-size: 2.25rem; font-weight: 700;">A</div><div id="grade-title" style="font-size: 0.875rem;">First Class</div></div>
                                <div id="numeric-grade" style="font-size: 3rem; font-weight: 700;">75%</div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-md shadow-md" style="background-color: white; padding: 16px; border-radius: 2px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h2 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem;">Key Areas for Improvement</h2>
                            <ul id="key-improvements" class="advice-list"><!-- Improvement items generated here --></ul>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 detailed-feedback-section">
                    <h2 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem;">Your Detailed Assessment Profile</h2>
                    <div id="detailed-feedback" class="detailed-feedback-grid"><!-- Detailed feedback cards generated here --></div>
                </div>
                
                <div class="mt-8 advice-section"> 
                    <h2 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem;">How to improve your overall grade:</h2>
                    <ul id="overall-advice" class="advice-list"><!-- Overall advice items generated here --></ul>
                </div>
                
                <div class="action-buttons">
                    <button id="save-profile-btn" class="ku-button">Save My Assessment Profile</button>
                    <button id="compare-profiles-btn" class="ku-button" disabled style="opacity: 0.5;">Compare with Previous Assessments</button>
                    <button id="print-summary-btn" class="ku-button">Print Assessment Summary</button>
                    <button id="matrix-button" class="ku-button">Complete FN4004 Grade Descriptor Matrix</button>
                    <a href="https://canvas.kingston.ac.uk/courses/8255/pages/7-fairness-in-assessment" class="ku-button" target="_blank">Fairness in Assessment</a>
                    <a href="https://kingstonuniversity.sharepoint.com/sites/mykingston/mysupport/myskills/Pages/default.aspx" class="ku-button" target="_blank">Support for Building Academic Skills</a>
                    <a href="https://canvas.kingston.ac.uk/courses/32501" class="ku-button full-width-button" target="_blank">Back to Module Home Page</a>
                </div>
                
                <div id="success-message" class="success-message">
                    <div style="display: flex; align-items: center;"><div style="margin-right: 10px;">✓</div><div><p style="font-weight: bold; margin: 0;">Assessment Profile Saved!</p><p style="font-size: 0.8rem; margin: 0;">You can now compare with previous assessments.</p></div></div>
                </div>
                
                <div class="note"><p>Note: This is a visual interpretation of the Kingston School of Art BA (Hons) Fashion grade descriptors for FN4004. Always refer to the official grade descriptors in your course handbook for definitive guidance.</p></div>
            </div>
            
            <div id="matrix-modal" class="modal">
                <div class="modal-content">
                    <span class="close-modal" id="close-matrix">×</span>
                    <h2>Complete FN4004 Grade Descriptor Matrix</h2>
                    <div style="margin: 20px 0;"><p>The following matrix maps the FN4004 Learning Outcomes against grade descriptors, showing what is expected at each level of achievement.</p></div>
                    <div style="overflow-x: auto;">
                        <table class="matrix-table">
                             <thead><tr><th>Learning Outcomes</th><th class="first-plus">First Class (A+)<br>85-100%</th><th class="first">First Class (A)<br>70-84%</th><th class="upper-second">Upper Second (B)<br>60-69%</th><th class="lower-second">Lower Second (C)<br>50-59%</th><th class="third">Third Class (D)<br>40-49%</th><th class="marginal-fail">Marginal Fail (FM)<br>35-39%</th><th class="fail">Fail (F)<br>0-34%</th></tr></thead>
                             <tbody>
                                 <tr><th>LO1:<br>Use research sources as a basis for creative design by exploring, evaluating and originating ideas into contemporary fashion concepts.</th><td>Outstanding and exceptional use of research sources that go far beyond requirements; highly original thinking.</td><td>Excellent use of research sources showing deep understanding and creative application to design development.</td><td>Good ability to use research sources with solid evaluation and critical thinking skills.</td><td>Satisfactory use of research sources with some evidence of evaluation.</td><td>Basic understanding of research sources with limited application to design.</td><td>Limited understanding of how to use research sources for design development.</td><td>Very little evidence of research informing design work.</td></tr>
                                 <tr><th>LO2:<br>Creatively generate, collate and record information appropriate to the design development process.</th><td>Exceptional creativity and innovation in generating and documenting design development with expert organization.</td><td>Excellent ability to confidently generate creative ideas and record them effectively through the design process.</td><td>Good confidence in generating and recording design ideas with clear progression.</td><td>Satisfactory ability to generate and record design information with some creative elements.</td><td>Basic ability to generate and record design ideas with minimal organization.</td><td>Limited ability to generate or record design information effectively.</td><td>Insufficient evidence of generating or recording design information.</td></tr>
                                 <tr><th>LO3:<br>Demonstrate an understanding of material qualities and evaluate their application and appropriateness to design outcomes.</th><td>Outstanding understanding of materials with exceptional evaluation skills for innovative applications.</td><td>Excellent understanding of material qualities with very good evaluation skills for design outcomes.</td><td>Good understanding of material qualities with solid evaluation of their design applications.</td><td>Satisfactory understanding of materials with some evaluation of their design applications.</td><td>Basic understanding of materials with limited evaluation of their design applications.</td><td>Limited understanding of materials with very little evaluation.</td><td>Very little evidence of material understanding or evaluation.</td></tr>
                                 <tr><th>LO4:<br>Advance research into creative concepts that recognise historical and/or ethical and social considerations.</th><td>Exceptional ability to research creative concepts with outstanding recognition of complex historical, ethical, and social contexts.</td><td>Excellent research into creative concepts with strong historical, ethical, and social awareness.</td><td>Good research with clear recognition of historical and ethical considerations.</td><td>Satisfactory research with some recognition of historical and ethical considerations.</td><td>Basic research with limited recognition of historical or ethical considerations.</td><td>Limited research with minimal recognition of historical or ethical considerations.</td><td>Very little evidence of research into historical or ethical considerations.</td></tr>
                                 <tr><th>LO5:<br>Communicate design outcomes using a variety of traditional and contemporary methods appropriate to professional contexts.</th><td>Outstanding communication of design outcomes using exceptionally skilled and innovative methods suitable for professional contexts.</td><td>Excellent communication of design outcomes using highly skilled traditional and contemporary methods.</td><td>Good communication of design outcomes with skillful use of appropriate methods.</td><td>Satisfactory communication of design outcomes using appropriate methods.</td><td>Basic communication of design outcomes with limited method variety.</td><td>Limited ability to communicate design outcomes effectively.</td><td>Very little evidence of ability to communicate design outcomes.</td></tr>
                                 <tr><th>Personal & Professional Development:<br>Demonstrate effective planning, time-management, commitment & subject engagement, including the ability to work independently and collaboratively.</th><td>Exceptional commitment and self-management with outstanding professional conduct.</td><td>Excellent commitment and self-management with very strong professional conduct.</td><td>Good commitment and self-management with consistent professional conduct.</td><td>Satisfactory commitment and self-management with adequate professional conduct.</td><td>Basic commitment and self-management with developing professional conduct.</td><td>Limited commitment and poor self-management with minimal professional conduct.</td><td>Insufficient commitment and self-management with lack of professional conduct.</td></tr>
                             </tbody>
                        </table>
                    </div>
                    <div style="text-align: center; margin-top: 20px;"><button id="close-matrix-btn" class="ku-button" style="width: auto;">Close</button></div>
                </div>
            </div>
            
            <div id="compare-modal" class="modal">
                <div class="modal-content">
                    <span class="close-modal" id="close-compare">×</span>
                    <h2>Compare with Previous Assessments</h2>
                    <div id="compare-content">
                        <div id="no-profiles" style="text-align: center; padding: 30px; display: none;"><p>No saved assessment profiles found.</p><p style="font-size: 0.9rem; margin-top: 10px;">Save your current assessment to enable comparison.</p></div>
                        <div id="has-profiles">
                            <div style="margin-bottom: 20px;"><h3>Progress Over Time</h3><div style="background-color: #f9fafb; padding: 16px; border-radius: 2px; overflow-x: auto;"><table id="progress-table" class="compare-table"><!-- Progress table generated here --></table></div></div>
                            <div style="margin-bottom: 20px;"><h3>Improvement Analysis</h3><div style="background-color: white; padding: 16px; border-radius: 2px; border: 1px solid #e5e7eb;"><h4 id="previous-date" style="font-weight: 600; margin-bottom: 10px;">Compared to previous assessment:</h4><ul id="improvement-list" class="advice-list"><!-- Improvement list generated here --></ul></div></div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;"><button id="close-compare-btn" class="ku-button" style="width: auto;">Close</button></div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Kingston School of Art - BA (Hons) Fashion Program – Learning Outcomes, Feedback and Assessment Knowledge Base</p>
            <p>© 2025 Kingston University</p>
        </div>
    </div>
    
     <!-- Include Chart.js library -->
     <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Data definitions (learningOutcomes, gradeBands, overallImprovements)
             const learningOutcomes = [ { id: 'outcome1', title: 'LO1: Research for Creative Design', description: 'Use research sources as a basis for creative design by exploring, evaluating and originating ideas into contemporary fashion concepts.', framework: 'Research and Analysis', feedback: { 'first-plus': { strength: 'Your work shows outstanding and exceptional use of research sources that go far beyond requirements, showcasing unique insights and original thinking.', evidence: 'Consider expanding your critical evaluation of unconventional sources and challenge yourself to form even more unexpected connections between disparate research elements. Your critical analysis could explore broader societal implications of your design concepts.', improvement: 'Continue developing your exceptional research approach by exploring even more specialized or interdisciplinary sources that could further push fashion boundaries.' }, 'first': { strength: 'Your work shows excellent use of research sources with deep understanding and creative application to design development.', evidence: 'Your research could benefit from more diverse or unexpected sources beyond conventional fashion references. Work on developing a more distinctive critical voice when analyzing sources and be more explicit about your analytical process in your documentation.', improvement: 'To reach A+ level, push your research beyond the expected sources and demonstrate more innovative connections between research and design concepts.' }, 'upper-second': { strength: 'Your work shows good ability to use research sources as a foundation for creative design work with solid evaluation skills.', evidence: 'Your research sources are somewhat predictable and your analysis needs more depth. Challenge yourself to explore beyond obvious references and develop a more rigorous methodology for analyzing sources. More explicit connections between research and design concepts would strengthen your work.', improvement: 'Deepen your critical analysis of research sources and show more creative connections between research and design development to move toward a First.' }, 'lower-second': { strength: 'Your work shows satisfactory use of research sources with some evidence of evaluation and idea development.', evidence: 'Your research is limited to obvious or surface-level sources, and your analysis remains primarily descriptive rather than critical. You need to demonstrate a more methodical approach to research and show clearer evaluation of how research informs design decisions.', improvement: 'Focus on developing stronger analytical skills when evaluating research, and show clearer connections between research and design outcomes.' }, 'third': { strength: 'Your work shows adequate use of research sources with basic understanding of how to apply them to design.', evidence: 'Your research is minimal and lacks variety, with little evidence of analysis beyond description. You need to significantly expand the range of sources consulted and develop a framework for evaluating their relevance to your design work.', improvement: 'Expand your research beyond obvious sources and develop your analytical skills to evaluate research more critically.' }, 'marginal-fail': { strength: 'Your work shows limited understanding of how to use research sources for design development.', evidence: 'Your research is severely inadequate in scope and depth, with little to no analysis evident. There is minimal connection between the limited research presented and your design concepts. A structured approach to research collection and analysis is notably absent.', improvement: 'Build a more structured approach to research, gathering more diverse sources and practice analyzing them in relation to your design ideas.' }, 'fail': { strength: 'Your work shows very little evidence of research informing design work.', evidence: 'There is almost no identifiable research in your work, or research that is present is irrelevant to your design concepts. You need to understand the fundamental purpose of research within the design process and develop basic skills in sourcing and analyzing information.', improvement: 'Develop a basic understanding of research methods and how to apply research to inform design decisions and concepts.' } } }, { id: 'outcome2', title: 'LO2: Design Development Process', description: 'Creatively generate, collate and record information appropriate to the design development process.', framework: 'Experimentation and Practice', feedback: { 'first-plus': { strength: 'Your work shows exceptional confidence and creativity in generating, organizing, and documenting design development.', evidence: 'While your documentation is excellent, you could experiment with even more innovative approaches to recording your process. Consider developing a more personalized documentation system that captures nuances of your creative thinking that conventional methods might miss.', improvement: 'Continue your excellent practice, perhaps exploring even more innovative methods of recording and presenting your design process.' }, 'first': { strength: 'Your work shows excellent ability to confidently generate creative ideas and record them effectively throughout the design process.', evidence: 'Your documentation follows relatively conventional formats. Challenge yourself to develop more innovative or unexpected ways of capturing your design journey. The organization of information could be more strategic to highlight the critical moments in your development process.', improvement: 'To reach A+ level, experiment with more innovative or unexpected methods of recording your design process and organizing information.' }, 'upper-second': { strength: 'Your work shows good confidence in generating and recording design ideas with clear progression.', evidence: 'Your process documentation lacks creative presentation and distinctive organization. There are gaps in your developmental journey that limit understanding of key decision points. More consistent and thorough documentation would better demonstrate your creative thinking process.', improvement: 'Work on developing more creative approaches to recording your design process and show more confidence in pursuing original ideas.' }, 'lower-second': { strength: 'Your work shows satisfactory ability to generate and record design information with some creative elements.', evidence: 'Your documentation is inconsistent and lacks clarity in showing progression of ideas. The organizational structure is basic and doesn\'t effectively highlight development of concepts. Design decisions often appear without clear rationale or developmental stages.', improvement: 'Improve the creativity and clarity in how you document your design process, showing more thoughtful organization and progression of ideas.' }, 'third': { strength: 'Your work shows basic ability to generate and record design ideas.', evidence: 'Your documentation is minimal and disorganized, making it difficult to follow your design journey. You frequently omit critical developmental stages, and your recording methods lack variety. There is little evidence of reflection on process or methodology.', improvement: 'Develop a more structured approach to organizing your portfolio and experiment with more creative ways to record your design process.' }, 'marginal-fail': { strength: 'Your work shows limited ability to generate or record design information.', evidence: 'Your documentation is severely insufficient, with significant gaps that make it impossible to understand how ideas developed. Recording methods are rudimentary with no evidence of organization or methodology. Design decisions appear arbitrary with no visible development process.', improvement: 'Practice basic methods of recording design development and organizing information in a logical sequence.' }, 'fail': { strength: 'Your work shows insufficient evidence of generating or recording design information.', evidence: 'There is almost no documentation of your design process or it is so chaotic that no progression can be discerned. You need to understand the fundamental importance of recording design development and develop basic organizational systems for your work.', improvement: 'Learn and apply fundamental principles of documenting design development and organizing information appropriately.' } } }, { id: 'outcome3', title: 'LO3: Material Understanding', description: 'Demonstrate an understanding of material qualities and evaluate their application and appropriateness to design outcomes.', framework: 'Experimentation and Practice', feedback: { 'first-plus': { strength: 'Your work shows outstanding understanding of materials with exceptional ability to evaluate their qualities for innovative design applications.', evidence: 'To further develop your excellent material knowledge, you could explore more speculative applications that challenge conventional thinking about materials. Consider investigating emerging sustainable materials and processes that push the boundaries of current practice.', improvement: 'Continue your exceptional material investigations, perhaps exploring even more sustainable or cutting-edge materials.' }, 'first': { strength: 'Your work shows excellent understanding of material qualities with very good evaluation skills for design outcomes.', evidence: 'Your material investigations could be more experimental and risk-taking. While you demonstrate good technical knowledge, you need to push boundaries with more innovative applications and more comprehensive testing of material limitations and possibilities.', improvement: 'To reach A+ level, deepen your exploration of material innovation and consider more experimental applications in your designs.' }, 'upper-second': { strength: 'Your work shows good understanding of material qualities with solid evaluation of their design applications.', evidence: 'Your material exploration remains relatively safe and predictable. You need to conduct more thorough testing of properties and investigate unconventional applications. Your evaluation criteria should be more sophisticated, considering factors beyond the obvious functional and aesthetic properties.', improvement: 'Develop a more sophisticated understanding of material properties and experiment with more creative or unexpected applications.' }, 'lower-second': { strength: 'Your work shows satisfactory understanding of materials with some evaluation of their design applications.', evidence: 'Your material investigations are superficial and lack methodical testing. You often select materials based on limited criteria without proper consideration of alternatives. Your evaluation needs to be more systematic and consider a broader range of properties relevant to your design intentions.', improvement: 'Enhance your material investigation with more in-depth analysis of properties and more thoughtful consideration of design applications.' }, 'third': { strength: 'Your work shows basic understanding of materials with limited evaluation of their design applications.', evidence: 'Your knowledge of materials is very limited, with minimal evidence of testing or exploration. You often make inappropriate material choices that don\'t align with your design intentions. Your evaluation lacks structure and fails to consider essential properties like durability, sustainability, or fabrication requirements.', improvement: 'Develop a more structured approach to investigating materials and practice evaluating their properties for specific design outcomes.' }, 'marginal-fail': { strength: 'Your work shows limited understanding of materials with very little evaluation.', evidence: 'Your work shows significant gaps in basic material knowledge and almost no evidence of testing or exploration. Material selections appear arbitrary and unsuitable for your design intentions. You need to develop fundamental understanding of how material properties affect design outcomes.', improvement: 'Build basic knowledge of material properties and practice simple evaluation techniques for design applications.' }, 'fail': { strength: 'Your work shows very little evidence of material understanding or evaluation.', evidence: 'There is almost no evidence of material consideration in your work. You need to develop awareness of even the most basic material properties and how they relate to design applications. Your work lacks any coherent approach to material selection or evaluation.', improvement: 'Learn fundamental principles of material properties and how they relate to design outcomes.' } } }, { id: 'outcome4', title: 'LO4: Historical & Ethical Research', description: 'Advance research into creative concepts that recognise historical and/or ethical and social considerations.', framework: 'Research and Analysis', feedback: { 'first-plus': { strength: 'Your work shows exceptional ability to research creative concepts with outstanding recognition of historical, ethical, and social contexts.', evidence: 'To further develop your excellent contextual understanding, you could engage more deeply with emerging ethical debates within fashion, such as labor practices and cultural appropriation. Consider more critically examining power dynamics and privilege within historical fashion narratives.', improvement: 'Continue your excellent contextual research, perhaps exploring even more nuanced ethical or cultural considerations in fashion.' }, 'first': { strength: 'Your work shows excellent research into creative concepts with strong historical, ethical, and social awareness.', evidence: 'Your contextual research could be more challenging of established narratives. While you make good connections to ethical considerations, your analysis could be more critical of power structures and privilege within fashion\'s historical and contemporary contexts. More explicit integration of ethical considerations into your design thinking is needed.', improvement: 'To reach A+ level, develop even deeper insights into historical contexts or ethical considerations that challenge conventional thinking.' }, 'upper-second': { strength: 'Your work shows good research with clear recognition of historical and ethical considerations.', evidence: 'Your historical and ethical research remains somewhat superficial, addressing obvious issues without deeper critical analysis. You need to move beyond describing ethical concerns to analyzing their implications for design practice. Your understanding of historical contexts would benefit from more nuanced consideration of social and cultural factors.', improvement: 'Deepen your exploration of historical and ethical contexts and show more sophisticated integration into your creative concepts.' }, 'lower-second': { strength: 'Your work shows satisfactory research with some recognition of historical and ethical considerations.', evidence: 'Your contextual research is limited and often disconnected from your design work. You demonstrate only basic awareness of ethical considerations without meaningful analysis. Historical references are used in a descriptive rather than analytical way, with limited understanding of their contexts.', improvement: 'Strengthen your research into historical and ethical contexts and make clearer connections to your design development.' }, 'third': { strength: 'Your work shows basic research with limited recognition of historical or ethical considerations.', evidence: 'Your work shows minimal acknowledgment of historical or ethical contexts, with significant gaps in understanding. Connections between contextual research and design concepts are weak or missing. You need to develop a more structured approach to investigating these areas and their relevance to fashion design.', improvement: 'Develop a more structured approach to researching historical and ethical contexts and practice applying these to your design work.' }, 'marginal-fail': { strength: 'Your work shows limited research with minimal recognition of historical or ethical considerations.', evidence: 'Your work demonstrates very little awareness of historical contexts or ethical implications in fashion. There are major gaps in understanding basic concepts relevant to responsible design practice. You need to develop foundational knowledge of how fashion operates within broader historical, social, and ethical frameworks.', improvement: 'Build basic understanding of how historical and ethical considerations influence fashion design and practice incorporating these into your research.' }, 'fail': { strength: 'Your work shows very little evidence of research into historical or ethical considerations.', evidence: 'There is almost no acknowledgment of historical contexts or ethical considerations in your work. You need to develop awareness of even the most basic historical references or ethical concerns in fashion practice. Your work exists in isolation from broader contextual frameworks.', improvement: 'Learn fundamental principles of historical and ethical research in fashion and begin to incorporate these into your design thinking.' } } }, { id: 'outcome5', title: 'LO5: Design Communication', description: 'Communicate design outcomes using a variety of traditional and contemporary methods appropriate to professional contexts.', framework: 'Communication and Presentation', feedback: { 'first-plus': { strength: 'Your work shows outstanding communication of design outcomes using exceptionally skilled and innovative methods.', evidence: 'While your communication skills are excellent, you could experiment with even more cutting-edge presentation techniques that challenge industry conventions. Consider how emerging technologies or alternative platforms might further enhance the communication of your concepts.', improvement: 'Continue exploring cutting-edge communication methods while maintaining your exceptional standard of presentation.' }, 'first': { strength: 'Your work shows excellent communication of design outcomes using highly skilled traditional and contemporary methods.', evidence: 'Your presentation methods, while effective, could be more innovative or unexpected. You need to push boundaries in how you communicate your ideas, exploring techniques that might better capture the unique aspects of your design thinking. Consider more carefully how your presentation strategy aligns with your design philosophy.', improvement: 'To reach A+ level, experiment with more innovative or unexpected communication methods that push boundaries while maintaining clarity.' }, 'upper-second': { strength: 'Your work shows good communication of design outcomes with skillful use of appropriate methods.', evidence: 'Your presentation techniques are relatively conventional and safe. You need to develop more variety in your communication methods and ensure more consistent quality across all elements. Your consideration of audience needs and context could be more sophisticated to ensure maximum impact.', improvement: 'Develop more creative and sophisticated communication techniques and ensure consistent professional quality throughout.' }, 'lower-second': { strength: 'Your work shows satisfactory communication of design outcomes using appropriate methods.', evidence: 'Your communication lacks refinement and creativity, with inconsistent quality across different elements. Your choice of presentation methods often doesn\'t align well with your design concepts or target audience. Technical execution needs improvement to meet professional standards.', improvement: 'Improve the consistency and creativity of your communication methods, paying more attention to professional presentation standards.' }, 'third': { strength: 'Your work shows basic communication of design outcomes with limited method variety.', evidence: 'Your presentation skills are underdeveloped, with poor technical execution and limited variety in methods. You show little awareness of audience needs or professional contexts. Your communication fails to effectively convey the intent behind your designs or key aspects of your concepts.', improvement: 'Develop a wider range of communication techniques and practice applying them to present your ideas more professionally.' }, 'marginal-fail': { strength: 'Your work shows limited ability to communicate design outcomes effectively.', evidence: 'Your presentation is significantly below the standard expected at this level, with major technical flaws and inappropriate choice of methods. Your communication fails to convey basic information about your designs. You show minimal understanding of professional presentation requirements.', improvement: 'Learn and practice basic presentation techniques and focus on clearly communicating your design intentions.' }, 'fail': { strength: 'Your work shows very little evidence of ability to communicate design outcomes.', evidence: 'There is almost no effective communication of your design concepts. Your presentation lacks even the most basic organization or technical competence. You need to develop fundamental understanding of how to present design work to others in a clear and accessible way.', improvement: 'Develop fundamental communication skills and learn standard methods for presenting fashion design work.' } } }, { id: 'outcome6', title: 'Personal & Professional Development', description: 'Demonstrate effective planning, time-management, commitment & subject engagement, including the ability to work independently and collaboratively.', framework: 'Personal and Professional Development', feedback: { 'first-plus': { strength: 'Your work shows exceptional commitment and self-management with outstanding professional conduct.', evidence: 'While your professional approach is excellent, you could develop more advanced leadership skills within collaborative contexts. Consider how you might further mentor peers or facilitate knowledge exchange within your cohort as part of your professional development.', improvement: 'Continue to develop your excellent professional approach by taking on leadership roles and mentoring others.' }, 'first': { strength: 'Your work shows excellent commitment and self-management with very strong professional conduct.', evidence: 'Your approach to teamwork could be more proactive, particularly in leadership contexts. You need to develop more advanced strategies for managing complex projects and navigating challenging collaborative dynamics. Your reflection on your own professional development could be more structured and forward-looking.', improvement: 'To reach A+ level, develop your leadership skills and demonstrate more initiative in group contexts.' }, 'upper-second': { strength: 'Your work shows good commitment and self-management with consistent professional conduct.', evidence: 'Your time management and planning needs improvement, particularly for complex projects. You need to develop more effective strategies for balancing competing priorities and managing setbacks. Your ability to respond constructively to feedback and incorporate it into your work is inconsistent.', improvement: 'Work on developing more consistent self-reflection and planning skills to enhance your professional approach.' }, 'lower-second': { strength: 'Your work shows satisfactory commitment and self-management with adequate professional conduct.', evidence: 'Your professional approach lacks consistency, with evidence of poor planning and time management affecting project outcomes. Your engagement with feedback is superficial, and you struggle to effectively incorporate critiques into your work. In collaborative contexts, your contribution is minimal or inconsistent.', improvement: 'Improve your planning and self-management skills, and demonstrate more consistent engagement throughout projects.' }, 'third': { strength: 'Your work shows basic commitment and self-management with developing professional conduct.', evidence: 'Your approach to planning and time management is significantly underdeveloped, leading to incomplete work or rushed execution. You show limited engagement with the subject beyond minimum requirements. Your ability to work effectively in teams is hampered by poor communication or unreliability.', improvement: 'Develop basic planning and organizational strategies, and practice applying them consistently to your work.' }, 'marginal-fail': { strength: 'Your work shows limited commitment and poor self-management with minimal professional conduct.', evidence: 'Your work demonstrates serious deficiencies in planning and time management, with deadlines frequently missed or work substantially incomplete. There is little evidence of engagement with the subject or feedback. Your approach to collaborative work is problematic, affecting team dynamics or outcomes.', improvement: 'Learn fundamental time management and planning techniques and begin to apply them to your work processes.' }, 'fail': { strength: 'Your work shows insufficient commitment and self-management with lack of professional conduct.', evidence: 'There is almost no evidence of planning or time management in your work. Your engagement with the subject is minimal or absent. You need to develop basic understanding of professional expectations within educational and industry contexts, including reliability, communication, and personal responsibility.', improvement: 'Develop basic understanding of professional conduct and time management for academic and design work.' } } } ];
             const gradeBands = [ { id: 'first-plus', title: 'First Class (A+)', ranges: ['100%', '98%', '95%', '92%', '88%', '85%'], quality: 'Outstanding', color: '#80FF80', letterGrade: 'A+' }, { id: 'first', title: 'First Class (A)', ranges: ['82%', '78%', '75%', '72%', '70%'], quality: 'Very Good', color: '#BFFF80', letterGrade: 'A' }, { id: 'upper-second', title: 'Upper Second (B)', ranges: ['68%', '65%', '62%', '60%'], quality: 'Good', color: '#FFFF80', letterGrade: 'B' }, { id: 'lower-second', title: 'Lower Second (C)', ranges: ['58%', '55%', '52%', '50%'], quality: 'Satisfactory', color: '#FFE880', letterGrade: 'C' }, { id: 'third', title: 'Third Class (D)', ranges: ['48%', '45%', '42%', '40%'], quality: 'Adequate', color: '#FFCC80', letterGrade: 'D' }, { id: 'marginal-fail', title: 'Marginal Fail (FM)', ranges: ['38%', '35%'], quality: 'Unsatisfactory', color: '#FF9980', letterGrade: 'FM' }, { id: 'fail', title: 'Fail (F)', ranges: ['32%', '28%', '25%', '22%', '0%'], quality: 'Poor', color: '#FF8080', letterGrade: 'F' } ];
             const overallImprovements = { 'fail': [ 'Develop basic understanding of research methods and design processes', 'Begin to analyze materials rather than just describing them', 'Improve documentation of your design development process', 'Show evidence of basic material investigation', 'Practice fundamental presentation techniques', 'Develop basic time management and planning skills' ], 'marginal-fail': [ 'Strengthen your research with more diverse sources', 'Show clearer connections between research and design development', 'Improve organization and documentation of your design process', 'Conduct more thorough material investigations', 'Practice basic presentation techniques for more professional outcomes', 'Improve your self-management and planning' ], 'third': [ 'Expand your research beyond obvious sources', 'Develop better analytical skills rather than just describing', 'Improve organization of your design development process', 'Conduct more detailed material investigations with clearer evaluation', 'Show more consistent professionalism in presentation', 'Demonstrate more consistent engagement throughout projects' ], 'lower-second': [ 'Deepen your research and show stronger critical analysis', 'Make clearer connections between research and design development', 'Show more creative exploration in your design process', 'Enhance material investigations with more thoughtful evaluation', 'Improve consistency in professional presentation standards', 'Work on more effective planning and time management' ], 'upper-second': [ 'Extend research beyond expected sources with deeper critical analysis', 'Show more innovative connections between research and design', 'Demonstrate more creative exploration and risk-taking', 'Develop more sophisticated evaluation of materials and applications', 'Refine presentation techniques for more professional outcomes', 'Improve self-reflection and engagement with feedback' ], 'first': [ 'Push research to discover unexpected connections and insights', 'Take more creative risks that result in innovative outcomes', 'Demonstrate exceptional critical thinking throughout', 'Perfect technical execution in all aspects', 'Explore innovative presentation methods while maintaining clarity', 'Develop leadership skills and initiative in collaborative contexts' ], 'first-plus': [ 'Continue your outstanding work across all learning outcomes', 'Consider mentoring others to share your exceptional approach', 'Explore opportunities to showcase your work professionally', 'Maintain your excellent standard while continuing to innovate', 'Develop your professional network and industry connections' ] };

            // State and DOM elements...
            let performanceLevels = { outcome1: { bandId: 'first', percentage: '75%' }, outcome2: { bandId: 'upper-second', percentage: '65%' }, outcome3: { bandId: 'lower-second', percentage: '55%' }, outcome4: { bandId: 'upper-second', percentage: '62%' }, outcome5: { bandId: 'first', percentage: '72%' }, outcome6: { bandId: 'upper-second', percentage: '68%' } };
            const outcomeContainer = document.getElementById('outcomes-container');
            const performanceChartElement = document.getElementById('performance-chart');
            const gradeDisplay = document.getElementById('average-grade-display');
            const letterGrade = document.getElementById('letter-grade');
            const gradeTitle = document.getElementById('grade-title');
            const numericGrade = document.getElementById('numeric-grade');
            const keyImprovements = document.getElementById('key-improvements');
            const detailedFeedback = document.getElementById('detailed-feedback');
            const overallAdvice = document.getElementById('overall-advice');
            const matrixModal = document.getElementById('matrix-modal');
            const compareModal = document.getElementById('compare-modal');
            const closeMatrixBtn = document.getElementById('close-matrix');
            const closeMatrixBtn2 = document.getElementById('close-matrix-btn');
            const closeCompareBtn = document.getElementById('close-compare');
            const closeCompareBtn2 = document.getElementById('close-compare-btn');
            const saveProfileBtn = document.getElementById('save-profile-btn');
            const compareProfilesBtn = document.getElementById('compare-profiles-btn');
            const printSummaryBtn = document.getElementById('print-summary-btn');
            const matrixButton = document.getElementById('matrix-button');
            const successMessage = document.getElementById('success-message');
            let performanceChart = null; 
            
            // Initialization Calls...
            initializeUI();
            updateAllContent();
            checkSavedProfiles();
            
            // Event Listeners...
            matrixButton.addEventListener('click', () => { matrixModal.style.display = 'block'; });
            closeMatrixBtn.addEventListener('click', () => { matrixModal.style.display = 'none'; });
            closeMatrixBtn2.addEventListener('click', () => { matrixModal.style.display = 'none'; });
            compareProfilesBtn.addEventListener('click', () => { updateCompareModal(); compareModal.style.display = 'block'; });
            closeCompareBtn.addEventListener('click', () => { compareModal.style.display = 'none'; });
            closeCompareBtn2.addEventListener('click', () => { compareModal.style.display = 'none'; });
            window.addEventListener('click', (event) => { if (event.target === matrixModal) { matrixModal.style.display = 'none'; } if (event.target === compareModal) { compareModal.style.display = 'none'; } });
            saveProfileBtn.addEventListener('click', saveProfile);
            printSummaryBtn.addEventListener('click', printSummary);
            
            // --- Functions --- (Initialize, Handlers, Updates, Save, Check, Compare, Print)
             function initializeUI() { outcomeContainer.innerHTML = ''; learningOutcomes.forEach(outcome => { const outcomeElement = document.createElement('div'); outcomeElement.className = 'mb-6'; outcomeElement.style.marginBottom = '24px'; const currentLevel = performanceLevels[outcome.id] || { bandId: 'fail', percentage: '0%' }; const currentBand = gradeBands.find(g => g.id === currentLevel.bandId) || gradeBands[gradeBands.length - 1]; const html = ` <h3 class="font-bold text-gray-800" style="font-weight: bold; color: #333;">${outcome.title}</h3> <p class="text-sm text-gray-600 mb-2" style="font-size: 0.875rem; color: #555; margin-bottom: 8px;">${outcome.description}</p> <p class="framework-field">School of Design Framework Mapping: ${outcome.framework}</p> <div class="mb-3"> <label class="text-sm font-semibold block mb-1" style="font-size: 0.875rem; font-weight: 600; display: block; margin-bottom: 4px;">Select Grade Band:</label> <div class="buttons-container" id="grade-buttons-${outcome.id}"> ${gradeBands.map(grade => `<button class="grade-btn ${grade.id} ${currentLevel.bandId === grade.id ? 'active' : ''}" data-grade-id="${grade.id}" data-outcome-id="${outcome.id}" style="background-color: ${grade.color};" title="${grade.title} (${grade.ranges.join(', ')})" >${grade.title.split('(')[0]}</button>`).join('')} </div> </div> <div> <label class="text-sm font-semibold block mb-1" style="font-size: 0.875rem; font-weight: 600; display: block; margin-bottom: 4px;">Select Specific Mark:</label> <div class="percentage-container" id="percentage-buttons-${outcome.id}"> ${(currentBand.ranges || []).map(percentage => `<button class="percentage-btn ${currentLevel.percentage === percentage ? 'active' : ''}" data-percentage="${percentage}" data-outcome-id="${outcome.id}">${percentage}</button>`).join('')} </div> </div>`; outcomeElement.innerHTML = html; outcomeContainer.appendChild(outcomeElement); }); document.querySelectorAll('.grade-btn').forEach(button => button.addEventListener('click', handleGradeBandChange)); document.querySelectorAll('.percentage-btn').forEach(button => button.addEventListener('click', handlePercentageChange)); }
             function handleGradeBandChange(event) { const outcomeId = event.target.dataset.outcomeId, gradeId = event.target.dataset.gradeId; if (!learningOutcomes.some(o => o.id === outcomeId)) { console.error(`Invalid outcomeId: ${outcomeId}`); return; } document.querySelectorAll(`#grade-buttons-${outcomeId} .grade-btn`).forEach(btn => btn.classList.remove('active')); event.target.classList.add('active'); const gradeBand = gradeBands.find(g => g.id === gradeId); if (!gradeBand) { console.error(`Invalid gradeId: ${gradeId}`); return; } const defaultPercentage = gradeBand.ranges[0]; performanceLevels[outcomeId] = { bandId: gradeId, percentage: defaultPercentage }; const percentageContainer = document.getElementById(`percentage-buttons-${outcomeId}`); if (!percentageContainer) return; percentageContainer.innerHTML = gradeBand.ranges.map(percentage => `<button class="percentage-btn ${defaultPercentage === percentage ? 'active' : ''}" data-percentage="${percentage}" data-outcome-id="${outcomeId}">${percentage}</button>`).join(''); percentageContainer.querySelectorAll('.percentage-btn').forEach(button => button.addEventListener('click', handlePercentageChange)); updateAllContent(); }
             function handlePercentageChange(event) { const outcomeId = event.target.dataset.outcomeId, percentage = event.target.dataset.percentage; if (!learningOutcomes.some(o => o.id === outcomeId)) { console.error(`Invalid outcomeId: ${outcomeId}`); return; } document.querySelectorAll(`#percentage-buttons-${outcomeId} .percentage-btn`).forEach(btn => btn.classList.remove('active')); event.target.classList.add('active'); let gradeBandId = null; for (const band of gradeBands) { if (band.ranges.includes(percentage)) { gradeBandId = band.id; break; } } if (gradeBandId) { performanceLevels[outcomeId] = { bandId: gradeBandId, percentage: percentage }; document.querySelectorAll(`#grade-buttons-${outcomeId} .grade-btn`).forEach(btn => { btn.classList.toggle('active', btn.dataset.gradeId === gradeBandId); }); updateAllContent(); } else { console.warn(`Could not find grade band for percentage: ${percentage}`); } }
             function updateAllContent() { updatePerformanceChart(); updateAverageGrade(); updateKeyImprovements(); updateDetailedFeedback(); updateOverallAdvice(); }
             function updatePerformanceChart() { if (!Chart || !performanceChartElement) { console.error("Chart.js library or canvas element not available."); if (document.getElementById('performance-chart-container')) document.getElementById('performance-chart-container').innerHTML = '<p style="text-align: center; color: red;">Error loading chart.</p>'; return; } const ctx = performanceChartElement.getContext('2d'); if (!ctx) { console.error("Failed to get 2D context for chart."); return; } if (performanceChart) { performanceChart.destroy(); } const dataValues = learningOutcomes.map(outcome => { const gradeId = performanceLevels[outcome.id]?.bandId; const gradeIndex = gradeBands.findIndex(g => g.id === gradeId); return gradeIndex !== -1 ? gradeBands.length - 1 - gradeIndex : 0; }); const labels = learningOutcomes.map(outcome => outcome.title.split(':')[0]); const backgroundColors = learningOutcomes.map(outcome => { const gradeId = performanceLevels[outcome.id]?.bandId; return gradeBands.find(g => g.id === gradeId)?.color || '#ccc'; }); performanceChart = new Chart(ctx, { type: 'radar', data: { labels: labels, datasets: [{ label: 'Performance', data: dataValues, fill: true, backgroundColor: 'rgba(59, 130, 246, 0.3)', borderColor: 'rgba(59, 130, 246, 0.8)', pointBackgroundColor: backgroundColors, pointBorderColor: '#333', pointHoverBackgroundColor: backgroundColors, pointHoverBorderColor: '#000', pointRadius: 6, pointHoverRadius: 8 }] }, options: { responsive: true, maintainAspectRatio: true, scales: { r: { angleLines: { display: true, color: '#ddd' }, grid: { color: '#ddd' }, pointLabels: { font: { size: 11 }, color: '#333' }, suggestedMin: 0, suggestedMax: gradeBands.length -1, ticks: { stepSize: 1, display: false } } }, plugins: { legend: { display: false }, tooltip: { callbacks: { label: function(context) { const i = context.dataIndex; if (i < 0 || i >= learningOutcomes.length) return ''; const oid = learningOutcomes[i].id; const info = performanceLevels[oid]; const grade = gradeBands.find(g => g.id === info?.bandId); return grade ? `${grade.title} (${info.percentage})` : 'N/A'; } } } } } }); }
             function updateAverageGrade() { const percentages = Object.values(performanceLevels).map(level => level && typeof level.percentage === 'string' ? parseFloat(level.percentage.replace('%', '')) : NaN); const validPercentages = percentages.filter(p => !isNaN(p)); if (validPercentages.length === 0) { gradeDisplay.style.backgroundColor = '#ccc'; letterGrade.textContent = '?'; gradeTitle.textContent = 'N/A'; numericGrade.textContent = '--%'; return; } const average = validPercentages.reduce((sum, val) => sum + val, 0) / validPercentages.length; let roundedAverage; const allSteps = gradeBands.flatMap(band => band.ranges.map(r => parseFloat(r.replace('%','')))).sort((a, b) => a - b); const minStep = allSteps[0], maxStep = allSteps[allSteps.length - 1]; const clampedAverage = Math.max(minStep, Math.min(average, maxStep)); roundedAverage = allSteps.reduce((prev, curr) => (Math.abs(curr - clampedAverage) < Math.abs(prev - clampedAverage) ? curr : prev)); if (!allSteps.includes(roundedAverage)) { roundedAverage = allSteps.reduce((prev, curr) => Math.abs(curr - clampedAverage) < Math.abs(prev - clampedAverage) ? curr : prev); } let gradeBand = null; for (const band of gradeBands) { const rangeNums = band.ranges.map(r => parseFloat(r.replace('%', ''))), minRange = Math.min(...rangeNums), maxRange = Math.max(...rangeNums), epsilon = 0.01; if (roundedAverage >= minRange - epsilon && roundedAverage <= maxRange + epsilon) { gradeBand = band; break; } } if (!gradeBand) { gradeBand = gradeBands[gradeBands.length - 1]; console.warn("Could not determine grade band for average:", roundedAverage); } if (gradeBand) { gradeDisplay.className = `flex items-center justify-center gap-4 p-4 rounded-md ${gradeBand.id}`; gradeDisplay.style.cssText = `background-color: ${gradeBand.color}; display: flex; align-items: center; justify-content: center; gap: 16px; padding: 16px; border-radius: 2px;`; letterGrade.textContent = gradeBand.letterGrade; gradeTitle.textContent = gradeBand.title; numericGrade.textContent = `${roundedAverage}%`; } } 
             function updateKeyImprovements() { keyImprovements.innerHTML = ''; learningOutcomes.forEach(outcome => { const level = performanceLevels[outcome.id]; if (level && level.bandId) { const feedback = outcome.feedback[level.bandId]; if (feedback && feedback.improvement) { const li = document.createElement('li'); li.innerHTML = `<span style="font-weight: 600;">${outcome.title.split(':')[0]}:</span> ${feedback.improvement}`; keyImprovements.appendChild(li); } } }); }
             function updateDetailedFeedback() { detailedFeedback.innerHTML = ''; learningOutcomes.forEach(outcome => { const gradeInfo = performanceLevels[outcome.id]; if (gradeInfo && gradeInfo.bandId) { const grade = gradeBands.find(g => g.id === gradeInfo.bandId); const feedback = outcome.feedback[gradeInfo.bandId]; const card = document.createElement('div'); card.className = 'feedback-card'; card.innerHTML = `<div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;"><h3 style="font-weight: bold; margin: 0; padding-right: 10px;">${outcome.title}</h3><div style="display: flex; flex-direction: column; align-items: flex-end; white-space: nowrap;"><span style="padding: 4px 8px; border-radius: 2px; font-size: 0.875rem; font-weight: bold; margin-bottom: 4px; background-color: ${grade?.color || '#ccc'}; color: #333;">${grade?.title || 'N/A'}</span><span style="font-size: 0.875rem; font-weight: bold;">${gradeInfo?.percentage || 'N/A'}</span></div></div><div style="font-size: 0.875rem;"><div style="margin-bottom: 8px;"><strong class="section-title">Strengths Evidenced:</strong><br>${feedback?.strength || 'N/A'}</div><div style="margin-bottom: 8px;"><strong class="section-title">Reflection/Practice Areas:</strong><br>${feedback?.evidence || 'N/A'}</div><div><strong class="section-title">Summary:</strong><br>${feedback?.improvement || 'N/A'}</div></div>`; detailedFeedback.appendChild(card); } }); }
             function updateOverallAdvice() { const percentages = Object.values(performanceLevels).map(level => level && typeof level.percentage === 'string' ? parseFloat(level.percentage.replace('%', '')) : NaN); const validPercentages = percentages.filter(p => !isNaN(p)); if (validPercentages.length === 0) { overallAdvice.innerHTML = '<li>Cannot determine advice level.</li>'; return; } const average = validPercentages.reduce((sum, val) => sum + val, 0) / validPercentages.length; let gradeBandId = 'fail'; for (let i = 0; i < gradeBands.length; i++) { const band = gradeBands[i], rangeNums = band.ranges.map(r => parseFloat(r.replace('%', ''))), minRange = Math.min(...rangeNums); if (average >= minRange) { gradeBandId = band.id; break; } } if (average === 100) { gradeBandId = 'first-plus'; } if (gradeBandId && overallImprovements[gradeBandId]) { overallAdvice.innerHTML = ''; overallImprovements[gradeBandId].forEach(advice => { const li = document.createElement('li'); li.textContent = advice; overallAdvice.appendChild(li); }); } else { overallAdvice.innerHTML = '<li>Could not determine overall advice level.</li>'; console.warn("Could not find overall advice for grade band ID:", gradeBandId, "Average:", average); } }
             function saveProfile() { const now = new Date(), dateString = now.toISOString().slice(0, 10), timeString = now.toTimeString().slice(0, 5); const percentages = Object.values(performanceLevels).map(level => level && typeof level.percentage === 'string' ? parseFloat(level.percentage.replace('%', '')) : NaN); const validPercentages = percentages.filter(p => !isNaN(p)); if (validPercentages.length === 0) { alert("Cannot save profile with invalid performance levels."); return; } const average = validPercentages.reduce((sum, val) => sum + val, 0) / validPercentages.length; let roundedAverage; const allSteps = gradeBands.flatMap(band => band.ranges.map(r => parseFloat(r.replace('%','')))).sort((a, b) => a - b); const minStep = allSteps[0], maxStep = allSteps[allSteps.length - 1]; const clampedAverage = Math.max(minStep, Math.min(average, maxStep)); roundedAverage = allSteps.reduce((prev, curr) => (Math.abs(curr - clampedAverage) < Math.abs(prev - clampedAverage) ? curr : prev)); if (!allSteps.includes(roundedAverage)) { roundedAverage = allSteps.reduce((prev, curr) => Math.abs(curr - clampedAverage) < Math.abs(prev - clampedAverage) ? curr : prev); } let gradeBandId = null, gradeBandTitle = '', letterGrade = ''; for (const band of gradeBands) { const rangeNums = band.ranges.map(r => parseFloat(r.replace('%', ''))), minRange = Math.min(...rangeNums), maxRange = Math.max(...rangeNums), epsilon = 0.01; if (roundedAverage >= minRange - epsilon && roundedAverage <= maxRange + epsilon) { gradeBandId = band.id; gradeBandTitle = band.title; letterGrade = band.letterGrade; break; } } if (!gradeBandId) { gradeBandId = gradeBands[gradeBands.length - 1].id; gradeBandTitle = gradeBands[gradeBands.length - 1].title; letterGrade = gradeBands[gradeBands.length - 1].letterGrade; } const profile = { id: `profile-${Date.now()}`, date: `${dateString} ${timeString}`, performanceLevels: JSON.parse(JSON.stringify(performanceLevels)), averageGrade: { bandId: gradeBandId, bandTitle: gradeBandTitle, numericValue: roundedAverage, letterGrade: letterGrade } }; let existingProfiles = []; try { const storedProfiles = localStorage.getItem('fn4004-assessment-profiles'); if (storedProfiles) { existingProfiles = JSON.parse(storedProfiles); if (!Array.isArray(existingProfiles)) { existingProfiles = []; } } } catch (error) { console.error('Error loading saved profiles:', error); existingProfiles = []; localStorage.removeItem('fn4004-assessment-profiles'); } const updatedProfiles = [profile, ...existingProfiles].slice(0, 10); try { localStorage.setItem('fn4004-assessment-profiles', JSON.stringify(updatedProfiles)); } catch (storageError) { console.error("Error saving profile:", storageError); alert("Could not save profile."); return; } successMessage.style.display = 'block'; setTimeout(() => { successMessage.style.display = 'none'; }, 3000); compareProfilesBtn.disabled = false; compareProfilesBtn.style.opacity = '1'; }
             function checkSavedProfiles() { try { const storedProfiles = localStorage.getItem('fn4004-assessment-profiles'); if (storedProfiles) { const profiles = JSON.parse(storedProfiles); if (Array.isArray(profiles) && profiles.length > 0) { compareProfilesBtn.disabled = false; compareProfilesBtn.style.opacity = '1'; } else { compareProfilesBtn.disabled = true; compareProfilesBtn.style.opacity = '0.5'; } } else { compareProfilesBtn.disabled = true; compareProfilesBtn.style.opacity = '0.5'; } } catch (error) { console.error('Error checking saved profiles:', error); compareProfilesBtn.disabled = true; compareProfilesBtn.style.opacity = '0.5'; } }
             function updateCompareModal() { const hasProfilesDiv = document.getElementById('has-profiles'), noProfilesDiv = document.getElementById('no-profiles'), progressTable = document.getElementById('progress-table'), improvementList = document.getElementById('improvement-list'), previousDate = document.getElementById('previous-date'); try { const storedProfiles = localStorage.getItem('fn4004-assessment-profiles'); let profiles = []; if (storedProfiles) { profiles = JSON.parse(storedProfiles); if (!Array.isArray(profiles)) { profiles = []; } } if (profiles.length > 0) { hasProfilesDiv.style.display = 'block'; noProfilesDiv.style.display = 'none'; const percentages = Object.values(performanceLevels).map(level => level && typeof level.percentage === 'string' ? parseFloat(level.percentage.replace('%', '')) : NaN); const validPercentages = percentages.filter(p => !isNaN(p)); if (validPercentages.length === 0) { return; } const average = validPercentages.reduce((sum, val) => sum + val, 0) / validPercentages.length; let roundedAverage; const allSteps = gradeBands.flatMap(band => band.ranges.map(r => parseFloat(r.replace('%','')))).sort((a, b) => a - b); const minStep = allSteps[0], maxStep = allSteps[allSteps.length - 1]; const clampedAverage = Math.max(minStep, Math.min(average, maxStep)); roundedAverage = allSteps.reduce((prev, curr) => (Math.abs(curr - clampedAverage) < Math.abs(prev - clampedAverage) ? curr : prev)); if (!allSteps.includes(roundedAverage)) { roundedAverage = allSteps.reduce((prev, curr) => Math.abs(curr - clampedAverage) < Math.abs(prev - clampedAverage) ? curr : prev); } let letterGrade = ''; for (const band of gradeBands) { const rangeNums = band.ranges.map(r => parseFloat(r.replace('%', ''))), minRange = Math.min(...rangeNums), maxRange = Math.max(...rangeNums), epsilon = 0.01; if (roundedAverage >= minRange - epsilon && roundedAverage <= maxRange + epsilon) { letterGrade = band.letterGrade; break; } } if (!letterGrade) { letterGrade = gradeBands[gradeBands.length - 1].letterGrade; } let tableHtml = `<thead><tr><th>Date</th><th>Avg Grade</th>${learningOutcomes.map(o => `<th>${o.title.split(':')[0]}</th>`).join('')}</tr></thead><tbody><tr><td style="font-weight: bold;">Current</td><td style="font-weight: bold;">${roundedAverage}% (${letterGrade})</td>`; for (const outcome of learningOutcomes) { const grade = gradeBands.find(g => g.id === performanceLevels[outcome.id]?.bandId); tableHtml += `<td style="background-color: ${grade?.color || '#ccc'};">${performanceLevels[outcome.id]?.percentage || 'N/A'}</td>`; } tableHtml += `</tr>`; profiles.forEach(profile => { tableHtml += `<tr><td>${profile.date || 'N/A'}</td><td>${profile.averageGrade?.numericValue !== undefined ? profile.averageGrade.numericValue + '%' : 'N/A'} (${profile.averageGrade?.letterGrade || 'N/A'})</td>`; for (const outcome of learningOutcomes) { const levelInfo = profile.performanceLevels && profile.performanceLevels[outcome.id]; if (levelInfo && levelInfo.bandId) { const grade = gradeBands.find(g => g.id === levelInfo.bandId); tableHtml += `<td style="background-color: ${grade?.color || '#ccc'};">${levelInfo.percentage || 'N/A'}</td>`; } else { tableHtml += `<td>N/A</td>`; } } tableHtml += `</tr>`; }); tableHtml += `</tbody>`; progressTable.innerHTML = tableHtml; if (profiles.length > 0) { const mostRecentProfile = profiles[0]; previousDate.textContent = `Compared to previous assessment (${mostRecentProfile.date || 'N/A'}):`; improvementList.innerHTML = ''; learningOutcomes.forEach(outcome => { const currentPerc = performanceLevels[outcome.id] && typeof performanceLevels[outcome.id].percentage === 'string' ? parseFloat(performanceLevels[outcome.id].percentage.replace('%', '')) : NaN; const previousLevelInfo = mostRecentProfile.performanceLevels && mostRecentProfile.performanceLevels[outcome.id]; const previousPerc = previousLevelInfo && typeof previousLevelInfo.percentage === 'string' ? parseFloat(previousLevelInfo.percentage.replace('%', '')) : NaN; let changeText = 'N/A', changeClass = 'improvement-neutral'; if (!isNaN(currentPerc) && !isNaN(previousPerc)) { const diff = currentPerc - previousPerc; if (diff > 0) { changeText = `improved by ${diff.toFixed(0)}%`; changeClass = 'improvement-positive'; } else if (diff < 0) { changeText = `decreased by ${Math.abs(diff).toFixed(0)}%`; changeClass = 'improvement-negative'; } else { changeText = 'unchanged'; } } else if (isNaN(previousPerc) && !isNaN(currentPerc)) { changeText = 'newly assessed'; } const li = document.createElement('li'); li.innerHTML = `<span style="font-weight: 600;">${outcome.title.split(':')[0]}:</span> <span class="${changeClass}">${changeText}</span>`; improvementList.appendChild(li); }); const currentAvg = roundedAverage, previousAvg = mostRecentProfile.averageGrade?.numericValue; let changeText = 'N/A', changeClass = 'improvement-neutral'; if (previousAvg !== undefined && !isNaN(currentAvg) && !isNaN(previousAvg)) { const diff = currentAvg - previousAvg; if (diff > 0) { changeText = `improved by ${diff.toFixed(0)}%`; changeClass = 'improvement-positive'; } else if (diff < 0) { changeText = `decreased by ${Math.abs(diff).toFixed(0)}%`; changeClass = 'improvement-negative'; } else { changeText = 'unchanged'; } } else if (previousAvg === undefined) { changeText = 'no previous average'; } const li = document.createElement('li'); li.className = 'font-semibold mt-2'; li.style.cssText = 'font-weight: 600; margin-top: 8px;'; li.innerHTML = `<span>Overall grade:</span> <span class="${changeClass}">${changeText}</span>`; improvementList.appendChild(li); } else { previousDate.textContent = 'No previous assessment to compare.'; improvementList.innerHTML = ''; } } else { hasProfilesDiv.style.display = 'none'; noProfilesDiv.style.display = 'block'; } } catch (error) { console.error('Error updating compare modal:', error); hasProfilesDiv.style.display = 'none'; noProfilesDiv.style.display = 'block'; noProfilesDiv.innerHTML = '<p>Error loading comparison data.</p>'; } }

            // *** CORRECTED printSummary function ***
            function printSummary() {
                 const printWindow = window.open('', '_blank'); 
                 if (!printWindow) { alert('Please allow pop-ups to print the assessment summary.'); return; }
                 const percentages = Object.values(performanceLevels).map(level => level && typeof level.percentage === 'string' ? parseFloat(level.percentage.replace('%', '')) : NaN); 
                 const validPercentages = percentages.filter(p => !isNaN(p)); 
                 if (validPercentages.length === 0) { alert("Cannot print summary: No valid performance levels selected."); printWindow.close(); return; } 
                 const average = validPercentages.reduce((sum, val) => sum + val, 0) / validPercentages.length; 
                 let roundedAverage; const allSteps = gradeBands.flatMap(band => band.ranges.map(r => parseFloat(r.replace('%','')))).sort((a, b) => a - b); const minStep = allSteps[0], maxStep = allSteps[allSteps.length - 1]; const clampedAverage = Math.max(minStep, Math.min(average, maxStep)); roundedAverage = allSteps.reduce((prev, curr) => (Math.abs(curr - clampedAverage) < Math.abs(prev - clampedAverage) ? curr : prev)); if (!allSteps.includes(roundedAverage)) { roundedAverage = allSteps.reduce((prev, curr) => Math.abs(curr - clampedAverage) < Math.abs(prev - clampedAverage) ? curr : prev); } 
                 let gradeBandId = null, gradeBandTitle = '', letterGrade = ''; 
                 for (const band of gradeBands) { const rangeNums = band.ranges.map(r => parseFloat(r.replace('%', ''))), minRange = Math.min(...rangeNums), maxRange = Math.max(...rangeNums), epsilon = 0.01; if (roundedAverage >= minRange - epsilon && roundedAverage <= maxRange + epsilon) { gradeBandId = band.id; gradeBandTitle = band.title; letterGrade = band.letterGrade; break; } } 
                 if (!gradeBandId) { gradeBandId = gradeBands[gradeBands.length - 1].id; gradeBandTitle = gradeBands[gradeBands.length - 1].title; letterGrade = gradeBands[gradeBands.length - 1].letterGrade; }
                 
                 // Generate HTML parts separately
                 const outcomesHtml = learningOutcomes.map(outcome => { 
                    const gradeInfo = performanceLevels[outcome.id]; 
                    const grade = gradeBands.find(g => g.id === gradeInfo?.bandId); 
                    const feedback = outcome.feedback[gradeInfo?.bandId]; 
                    // ** NO backslash here **
                    return \`<div class="outcome"><h4>${outcome.title}</h4><div class="grade-band">Grade: ${grade?.title || 'N/A'} (${gradeInfo?.percentage || 'N/A'})</div><p><strong>Strengths Evidenced:</strong> ${feedback?.strength || 'N/A'}</p><p><strong>Reflection/Practice Areas:</strong> ${feedback?.evidence || 'N/A'}</p><p><strong>Summary:</strong> ${feedback?.improvement || 'N/A'}</p></div>\`; 
                 }).join(''); 
                 const adviceItems = (overallImprovements[gradeBandId] || []);
                 const adviceHtml = adviceItems.length > 0 
                    // ** NO backslash here **
                    ? adviceItems.map(advice => \`<li>${advice}</li>\`).join('') 
                    : '<li>N/A</li>'; 

                 // Build final print content
                 const printContent = \`
                     <!DOCTYPE html>
                     <html><head><title>FN4004 Assessment Summary</title>
                         <style> body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; line-height: 1.5; } .header { text-align: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #ccc; } .header h1 { font-size: 20px; margin-bottom: 5px; } .header h2 { font-size: 16px; margin-bottom: 10px; color: #555; } .summary-box { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; background-color: #f9f9f9; } .outcome { margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px dashed #eee; } .outcome:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; } .outcome h4 { font-size: 14px; margin-top: 0; margin-bottom: 5px; } .outcome p { font-size: 13px; margin: 3px 0; } .grade-band { font-weight: bold; margin-bottom: 5px; font-size: 13px; } .average-grade { font-size: 20px; font-weight: bold; text-align: center; margin: 20px 0; } .date { text-align: right; font-style: italic; margin-bottom: 20px; font-size: 12px; } .footer { margin-top: 30px; font-size: 11px; text-align: center; color: #666; border-top: 1px solid #eee; padding-top: 15px; } h3 { font-size: 16px; margin-top: 25px; margin-bottom: 10px; border-bottom: 1px solid #ddd; padding-bottom: 5px; } ul { padding-left: 20px; margin: 10px 0; } li { font-size: 13px; margin-bottom: 5px; } strong { font-weight: 600; } @media print { body { max-width: 100%; padding: 10px; } .footer { page-break-after: avoid; } .outcome { page-break-inside: avoid; } } </style></head><body>
                         <div class="header"><h1>FN4004 Design Process 1</h1><h2>Assessment Profile Summary</h2></div> <div class="date">Date: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div> <div class="summary-box"><h3>Overall Assessment</h3><div class="average-grade">${roundedAverage}% (${letterGrade} - ${gradeBandTitle})</div></div> <h3>Learning Outcomes Assessment</h3>
                         ${outcomesHtml} {/* Interpolate generated HTML */}
                         <h3>Key Areas for Overall Improvement</h3>
                         <ul>${adviceHtml}</ul> {/* Interpolate generated HTML */}
                         <div class="footer"><p>This assessment summary is for reference only and not an official grade.</p><p>Kingston School of Art - BA (Hons) Fashion Program – FN4004 Design Process 1</p><p>© ${new Date().getFullYear()} Kingston University</p></div> </body></html>`;

                 printWindow.document.write(printContent); printWindow.document.close();
                 setTimeout(() => { try { printWindow.focus(); printWindow.print(); } catch (e) { console.error("Printing failed:", e); alert("Could not print automatically. Please use browser's print function."); } }, 750); 
            }


        }); // End DOMContentLoaded
    </script>
   
</body>
</html>
